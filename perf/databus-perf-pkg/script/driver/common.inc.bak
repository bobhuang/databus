int_scripts=${script_dir}/../../../../integration-test/script
genscript=${int_scripts}/dbus2_gen_event.py
data_dir=${script_dir}/../../data

remote_hosts="eat1-app171.corp.linkedin.com eat1-app172.corp.linkedin.com eat1-app173.corp.linkedin.com eat1-app174.corp.linkedin.com eat1-app175.corp.linkedin.com"
remote_hosts_all="eat1-app171.corp.linkedin.com eat1-app172.corp.linkedin.com eat1-app173.corp.linkedin.com eat1-app174.corp.linkedin.com eat1-app175.corp.linkedin.com eat1-app177.corp.linkedin.com eat1-app178.corp.linkedin.com eat1-app179.corp.linkedin.com eat1-app180.corp.linkedin.com eat1-app181.corp.linkedin.com"
relay=eat1-app170.corp.linkedin.com

ts=`date +%y%m%d%H%M%S`

function clean_relay_logs() {
	ssh -tt $relay 'rm -f nohup.out relay01/logs/*.log relay01/logs/*.out'
}

function start_relay() {
	source=$1
	ssh -tt $relay "nohup relay01/bin/start-perf-relay.sh $source"
}

function stop_relay() {
	source=$1
	ssh -tt $relay "nohup relay01/bin/stop-perf-relay.sh $source"
}

function get_relay_logs() {
	exp=$1
	scp $relay:relay01/logs/relay.log ${data_dir}/relay-$exp.$ts.log
	scp $relay:relay01/logs/gc.log ${data_dir}/gc-$exp.$ts.log
	gzip ${data_dir}/gc-$exp.$ts.log &
	scp $relay:relay01/logs/http.log ${data_dir}/http-$exp.$ts.log
	gzip ${data_dir}/http-$exp.$ts.log &
}

