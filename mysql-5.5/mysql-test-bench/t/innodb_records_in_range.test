use test;
create table t1(id int not null primary key) engine=innodb;
--disable_query_log
let $1=1000;
begin;

while ($1)
{
  eval insert into t1 values ($1);
  dec $1;
}
commit;
--enable_query_log
flush status;
show status like 'Innodb_buffer_%';
explain select * from t1 where id >= 300 and id < 400;
set innodb_records_in_range=40;
show status like 'Innodb_buffer_%';

explain select * from t1 where id >= 300 and id < 400;
show status like 'Innodb_buffer_%';
select count(*) from t1 where id >= 300 and id < 400;
show status like 'Innodb_buffer_%';
set innodb_records_in_range=0;
select count(*) from t1 where id >= 300 and id < 400;
show status like 'Innodb_buffer_%';
drop table t1;

