stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
drop database if exists foo;
Warnings:
Note	1008	Can't drop database 'foo'; database doesn't exist
create database foo;
select set_binlog_seq_id("foo",3),set_binlog_gen_id("foo",3);
set_binlog_seq_id("foo",3)	set_binlog_gen_id("foo",3)
NULL	NULL
drop database foo;
create database foo;
select set_binlog_seq_id("foo",3),set_binlog_gen_id("foo",3);
set_binlog_seq_id("foo",3)	set_binlog_gen_id("foo",3)
NULL	NULL
create table foo.t1 (n int) engine=innodb;
drop database foo;
select get_binlog_gen_id("test");
get_binlog_gen_id("test")
NULL
select set_binlog_gen_id("test", 12345);
set_binlog_gen_id("test", 12345)
NULL
use test;
select get_binlog_gen_id("test");
get_binlog_gen_id("test")
NULL
select get_binlog_seq_id("test");
get_binlog_seq_id("test")
NULL
create table t1(n int) engine=innodb;
set @binlog_group_id:=123;
insert into t1 values(11),(12),(13);
set @binlog_group_id:=223;
insert into t1 values(21),(22),(23);
set @binlog_group_id:=0;
insert into t1 values(31),(32),(33);
insert into t1 values(41),(42),(43);
create database d1;
select get_binlog_seq_id("test");
get_binlog_seq_id("test")
NULL
select set_binlog_seq_id("test",12345);
set_binlog_seq_id("test",12345)
NULL
select get_binlog_seq_id("test");
get_binlog_seq_id("test")
NULL
select set_binlog_gen_id("d1",212345);
set_binlog_gen_id("d1",212345)
NULL
use d1;
select get_binlog_gen_id("test");
get_binlog_gen_id("test")
NULL
select get_binlog_gen_id("d1");
get_binlog_gen_id("d1")
NULL
create table t1(n int) engine=innodb;
insert into t1 values(111),(112),(113);
insert into t1 values(121),(122),(123);
insert into t1 values(131),(132),(133);
insert into t1 values(141),(142),(143);
create database d2;
use d2;
create table t1(n int) engine=innodb;
insert into t1 values(211),(212),(213);
insert into t1 values(221),(222),(223);
create database exp_d1;
use exp_d1;
select set_binlog_gen_id("exp_d1",256);
set_binlog_gen_id("exp_d1",256)
NULL
use exp_d1;
create table t1(n int) engine=innodb;
insert into t1 values(1),(2),(3);
--> Start master server
insert into t1 values(231),(232),(233);
insert into t1 values(241),(242),(243);
begin;
insert into t1 values(241),(242),(243);
insert into t1 values(251),(252),(253);
insert into t1 values(261),(262),(263);
commit;
show binlog events;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	4	Format_desc	1	107	Server ver: 5.5.8-Linkedin-r283747-log, Binlog ver: 4
master-bin.000001	107	Query	1	196	drop database if exists foo
master-bin.000001	196	Query	1	277	create database foo
master-bin.000001	277	Query	1	356	drop database foo
master-bin.000001	356	Query	1	437	create database foo
master-bin.000001	437	Query	1	541	use `test`; create table foo.t1 (n int) engine=innodb
master-bin.000001	541	Query	1	620	drop database foo
master-bin.000001	620	Query	1	719	use `test`; create table t1(n int) engine=innodb
master-bin.000001	719	Query	1	787	BEGIN
master-bin.000001	787	Query	1	885	use `test`; insert into t1 values(11),(12),(13)
master-bin.000001	885	Xid	1	912	COMMIT /* xid=36 */
master-bin.000001	912	Query	1	980	BEGIN
master-bin.000001	980	Query	1	1078	use `test`; insert into t1 values(21),(22),(23)
master-bin.000001	1078	Xid	1	1105	COMMIT /* xid=38 */
master-bin.000001	1105	Query	1	1173	BEGIN
master-bin.000001	1173	Query	1	1271	use `test`; insert into t1 values(31),(32),(33)
master-bin.000001	1271	Xid	1	1298	COMMIT /* xid=40 */
master-bin.000001	1298	Query	1	1366	BEGIN
master-bin.000001	1366	Query	1	1464	use `test`; insert into t1 values(41),(42),(43)
master-bin.000001	1464	Xid	1	1491	COMMIT /* xid=41 */
master-bin.000001	1491	Query	1	1570	create database d1
master-bin.000001	1570	Query	1	1667	use `d1`; create table t1(n int) engine=innodb
master-bin.000001	1667	Query	1	1733	BEGIN
master-bin.000001	1733	Query	1	1832	use `d1`; insert into t1 values(111),(112),(113)
master-bin.000001	1832	Xid	1	1859	COMMIT /* xid=51 */
master-bin.000001	1859	Query	1	1925	BEGIN
master-bin.000001	1925	Query	1	2024	use `d1`; insert into t1 values(121),(122),(123)
master-bin.000001	2024	Xid	1	2051	COMMIT /* xid=52 */
master-bin.000001	2051	Query	1	2117	BEGIN
master-bin.000001	2117	Query	1	2216	use `d1`; insert into t1 values(131),(132),(133)
master-bin.000001	2216	Xid	1	2243	COMMIT /* xid=53 */
master-bin.000001	2243	Query	1	2309	BEGIN
master-bin.000001	2309	Query	1	2408	use `d1`; insert into t1 values(141),(142),(143)
master-bin.000001	2408	Xid	1	2435	COMMIT /* xid=54 */
master-bin.000001	2435	Query	1	2514	create database d2
master-bin.000001	2514	Query	1	2611	use `d2`; create table t1(n int) engine=innodb
master-bin.000001	2611	Query	1	2677	BEGIN
master-bin.000001	2677	Query	1	2776	use `d2`; insert into t1 values(211),(212),(213)
master-bin.000001	2776	Xid	1	2803	COMMIT /* xid=58 */
master-bin.000001	2803	Query	1	2869	BEGIN
master-bin.000001	2869	Query	1	2968	use `d2`; insert into t1 values(221),(222),(223)
master-bin.000001	2968	Xid	1	2995	COMMIT /* xid=59 */
master-bin.000001	2995	Query	1	3082	create database exp_d1
master-bin.000001	3082	Query	1	3183	use `exp_d1`; create table t1(n int) engine=innodb
master-bin.000001	3183	Query	1	3253	BEGIN
master-bin.000001	3253	Query	1	3350	use `exp_d1`; insert into t1 values(1),(2),(3)
master-bin.000001	3350	Xid	1	3377	COMMIT /* xid=65 */
master-bin.000001	3377	Stop	1	3396	
use test;
select * from t1;
n
11
12
13
21
22
23
31
32
33
41
42
43
231
232
233
241
242
243
241
242
243
251
252
253
261
262
263
use test;
drop table t1;
drop database d1;
drop database d2;
drop database exp_d1;
