stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
flush logs;
use test;
create table t1(`key` bigint not null primary key, 
value blob not null) engine=innodb;
create table t2(`key` bigint not null primary key, 
value blob not null) engine=innodb;
create database d1;
create table d1.t1(n int not null primary key) engine=innodb;
flush logs;
set global rpl_dbus_debug=1;
show create table test.t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `key` bigint(20) NOT NULL,
  `value` blob NOT NULL,
  PRIMARY KEY (`key`)
) ENGINE=RPL_DBUS DEFAULT CHARSET=latin1
show create table test.t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `key` bigint(20) NOT NULL,
  `value` blob NOT NULL,
  PRIMARY KEY (`key`)
) ENGINE=RPL_DBUS DEFAULT CHARSET=latin1
show create table d1.t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `n` int(11) NOT NULL,
  PRIMARY KEY (`n`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
use mysql;
create table rpl_dbus_config(prop_key varchar(50) not null 
primary key, value varchar(50) not null) engine=myisam;
use test;
insert into t1 values (1,'one'),(2,'two'),(3,'three');
insert into t1 values (4,'four'),(5,'five'),(6,'six');
update t1 set value='new five' where `key` = 5;
delete from t1 where `key` = 2;
update t1 set value='new one' where `key` = 1;
update t1 set value='new two' where `key` = 2;
update t1 set value='new three' where `key` = 3;
insert into t2 values (1,'one'),(2,'two'),(3,'three');
insert into t2 values (4,'four'),(5,'five'),(6,'six');
update t2 set value='new five' where `key` = 5;
delete from t2 where `key` = 2;
update t2 set value='new one' where `key` = 1;
update t2 set value='new two' where `key` = 2;
update t2 set value='new three' where `key` = 3;
stop slave;
set global rpl_dbus_debug = 0;
drop table mysql.rpl_dbus_config;
drop database d1;
